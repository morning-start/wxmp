# Wiki 文档索引

欢迎使用 `wxmp` 项目 Wiki 文档！本文档提供了项目的完整文档索引。

---

## 快速导航

### 📚 核心文档

| 文档 | 描述 | 适合人群 |
|------|------|----------|
| [项目概览](./项目概览.md) | 项目简介、技术栈、架构概览 | 所有人 |
| [架构设计](./架构设计.md) | 设计原则、模块设计、缓存策略 | 架构师、开发者 |
| [API 文档](./API文档.md) | API 层完整文档、数据模型、异常类 | 开发者 |
| [使用指南](./使用指南.md) | 快速开始、使用场景、最佳实践 | 用户、开发者 |
| [数据流动与状态管理](./数据流动与状态管理.md) | 数据流转、状态机、缓存策略 | 架构师、开发者 |
| [贡献指南](./贡献指南.md) | 如何贡献代码、开发环境设置 | 贡献者 |
| [常见问题](./常见问题.md) | 常见问题和解决方案 | 所有人 |
| [CHANGELOG](./CHANGELOG.md) | 版本历史、变更记录 | 所有人 |

---

## 文档详情

### 1. 项目概览

**内容**:
- 项目简介和核心特性
- 技术栈和依赖
- 项目架构和目录结构
- 分层架构说明
- 数据流动概览
- 状态管理概览
- 使用场景
- 扩展指南

**适合**: 所有人，特别是新用户

**阅读时间**: 10 分钟

---

### 2. 架构设计

**内容**:
- 设计原则（分层架构、单一职责、开闭原则、依赖倒置）
- 模块设计（API 层、Spider 层、Tools 层）
- 缓存策略（FakeID 缓存、时间范围缓存）
- 时间范围匹配算法
- 并发设计
- 错误处理
- 扩展点
- 性能优化
- 安全考虑
- 测试策略

**适合**: 架构师、高级开发者

**阅读时间**: 20 分钟

---

### 3. API 文档

**内容**:
- API 层概述
- WxMPAPI 类完整文档
  - 初始化
  - 方法列表（fetch_fakeid、fetch_article_list 等）
  - 静态方法（is_valid_article_link、fetch_article_content）
- 数据模型（TokenResponse、SearchBizResponse、ListExResponse 等）
- 异常类（TokenError、SearchBizError、ListExError）
- 使用示例
- 注意事项

**适合**: 开发者

**阅读时间**: 15 分钟

---

### 4. 使用指南

**内容**:
- 快速开始（安装、获取 Cookies、保存 Cookies）
- 使用场景
  - 场景 1: 直接使用 API
  - 场景 2: 使用已有爬虫（推荐）
  - 场景 3: 自定义爬虫
- 高级用法
  - 缓存管理
  - 并发控制
  - 错误处理
  - 数据处理
  - 文章内容处理
- 完整示例
  - 示例 1: 批量下载公众号文章
  - 示例 2: 增量更新文章
  - 示例 3: 自定义过滤和导出
- 最佳实践
- 常见问题

**适合**: 用户、开发者

**阅读时间**: 30 分钟

---

### 5. 数据流动与状态管理

**内容**:
- 数据流动
  - 整体数据流
  - FakeID 获取流程
  - 文章列表获取流程
  - 文章内容下载流程
- 状态管理
  - 缓存状态机
  - 时间范围匹配算法
  - 下载任务状态
- 缓存策略
  - Cache Aside 模式
  - 缓存文件结构
  - 缓存一致性
- 数据模型（TimeRange、ArticleDownloadTask）
- 并发控制
- 错误处理
- 性能优化
- 监控与日志

**适合**: 架构师、高级开发者

**阅读时间**: 25 分钟

---

## 按角色推荐

### 👨‍💼 产品经理

推荐阅读顺序:
1. [项目概览](./项目概览.md) - 了解项目整体情况
2. [使用指南](./使用指南.md) - 了解使用场景和功能

### 🏗️ 架构师

推荐阅读顺序:
1. [项目概览](./项目概览.md) - 了解项目整体情况
2. [架构设计](./架构设计.md) - 深入了解架构设计
3. [数据流动与状态管理](./数据流动与状态管理.md) - 了解数据流转和状态管理

### 👨‍💻 开发者

推荐阅读顺序:
1. [项目概览](./项目概览.md) - 了解项目整体情况
2. [使用指南](./使用指南.md) - 快速上手
3. [API 文档](./API文档.md) - 了解 API 接口
4. [架构设计](./架构设计.md) - 深入了解架构
5. [数据流动与状态管理](./数据流动与状态管理.md) - 了解数据流转

### 🧪 测试工程师

推荐阅读顺序:
1. [项目概览](./项目概览.md) - 了解项目整体情况
2. [架构设计](./架构设计.md) - 了解测试策略
3. [使用指南](./使用指南.md) - 了解使用场景

### 🔧 运维工程师

推荐阅读顺序:
1. [项目概览](./项目概览.md) - 了解项目整体情况
2. [架构设计](./架构设计.md) - 了解部署和监控
3. [数据流动与状态管理](./数据流动与状态管理.md) - 了解缓存和日志

---

## 按主题推荐

### 🚀 快速上手

1. [使用指南 - 快速开始](./使用指南.md#快速开始)
2. [使用指南 - 使用场景](./使用指南.md#使用场景)
3. [API 文档 - WxMPAPI 类](./API文档.md#wxmpapi-类)

### 🏗️ 架构理解

1. [项目概览 - 项目架构](./项目概览.md#项目架构)
2. [架构设计 - 设计原则](./架构设计.md#设计原则)
3. [架构设计 - 模块设计](./架构设计.md#模块设计)

### 📊 数据管理

1. [数据流动与状态管理 - 数据流动](./数据流动与状态管理.md#数据流动)
2. [数据流动与状态管理 - 缓存策略](./数据流动与状态管理.md#缓存策略)
3. [架构设计 - 缓存策略](./架构设计.md#缓存策略)

### 🔌 API 开发

1. [API 文档 - WxMPAPI 类](./API文档.md#wxmpapi-类)
2. [API 文档 - 数据模型](./API文档.md#数据模型)
3. [API 文档 - 异常类](./API文档.md#异常类)

### 🛠️ 扩展开发

1. [项目概览 - 扩展指南](./项目概览.md#扩展指南)
2. [架构设计 - 扩展点](./架构设计.md#扩展点)
3. [使用指南 - 自定义爬虫](./使用指南.md#场景-3-自定义爬虫)

---

## 项目结构

```
wxmp/
├── src/wxmp/                    # 源码目录
│   ├── api/                     # API 层
│   │   ├── __init__.py
│   │   ├── common.py           # 公共模型和异常
│   │   ├── index.py            # WxMPAPI 主类
│   │   ├── token.py            # Token 获取
│   │   ├── search_biz.py       # 公众号搜索 API
│   │   └── list_ex.py           # 文章列表 API
│   ├── spider/                  # Spider 层
│   │   ├── __init__.py
│   │   └── time_range_spider.py # 时间范围爬虫
│   └── tools/                   # Tools 层
│       ├── __init__.py
│       ├── article.py           # 文章内容处理
│       └── file.py              # 文件操作工具
├── test/                        # 测试目录
│   └── test_time_range_spider.py
├── wiki/                        # 项目文档
│   ├── README.md               # 本文件
│   ├── 项目概览.md
│   ├── 架构设计.md
│   ├── API文档.md
│   ├── 使用指南.md
│   └── 数据流动与状态管理.md
├── pyproject.toml              # 项目配置
└── README.md                   # 项目说明
```

---

## 常见问题快速索引

### 安装和配置

- Q: 如何安装 wxmp？
  A: 查看 [使用指南 - 安装](./使用指南.md#1-安装)

- Q: 如何获取 Cookies？
  A: 查看 [使用指南 - 获取 Cookies](./使用指南.md#2-获取-cookies)

### 使用问题

- Q: 如何搜索公众号？
  A: 查看 [使用指南 - 场景 1](./使用指南.md#场景-1-直接使用-api)

- Q: 如何下载文章？
  A: 查看 [使用指南 - 场景 2](./使用指南.md#场景-2-使用已有爬虫推荐)

- Q: 如何自定义爬虫？
  A: 查看 [使用指南 - 场景 3](./使用指南.md#场景-3-自定义爬虫)

### 技术问题

- Q: 缓存是如何工作的？
  A: 查看 [数据流动与状态管理 - 缓存策略](./数据流动与状态管理.md#缓存策略)

- Q: 时间范围匹配算法是什么？
  A: 查看 [数据流动与状态管理 - 时间范围匹配算法](./数据流动与状态管理.md#2-时间范围匹配算法)

- Q: 如何扩展 API？
  A: 查看 [架构设计 - 扩展点](./架构设计.md#扩展点)

### 错误处理

- Q: Token 获取失败怎么办？
  A: 查看 [使用指南 - 常见问题](./使用指南.md#常见问题)

- Q: 如何处理文章已失效的情况？
  A: 查看 [使用指南 - 常见问题](./使用指南.md#常见问题)

---

## 贡献指南

如果您发现文档有错误或需要补充，欢迎提交 Issue 或 Pull Request。

---

## 更新日志

### 2024-02-21

- 创建项目 Wiki 文档
- 添加项目概览文档
- 添加架构设计文档
- 添加 API 文档
- 添加使用指南
- 添加数据流动与状态管理文档

---

## 联系方式

- 项目主页: https://github.com/morning-start/wxmp
- 问题反馈: https://github.com/morning-start/wxmp/issues
- 邮箱: morning-start@foxmail.com

---

**祝您使用愉快！** 🎉
