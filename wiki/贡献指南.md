# è´¡çŒ®æŒ‡å—

æ„Ÿè°¢æ‚¨å¯¹ `wxmp` é¡¹ç›®çš„å…³æ³¨ï¼æˆ‘ä»¬æ¬¢è¿ä»»ä½•å½¢å¼çš„è´¡çŒ®ã€‚

---

## å¦‚ä½•è´¡çŒ®

### æŠ¥å‘Šé—®é¢˜

å¦‚æœæ‚¨å‘ç°äº† bug æˆ–æœ‰åŠŸèƒ½å»ºè®®ï¼Œè¯·ï¼š

1. æ£€æŸ¥ [Issues](https://github.com/morning-start/wxmp/issues) ç¡®è®¤é—®é¢˜æ˜¯å¦å·²è¢«æŠ¥å‘Š
2. å¦‚æœæœªè¢«æŠ¥å‘Šï¼Œåˆ›å»ºæ–°çš„ Issue
3. æä¾›è¯¦ç»†çš„é—®é¢˜æè¿°å’Œå¤ç°æ­¥éª¤

### æäº¤ä»£ç 

1. **Fork é¡¹ç›®**

   è®¿é—® https://github.com/morning-start/wxmpï¼Œç‚¹å‡» Fork æŒ‰é’®

2. **å…‹éš†åˆ°æœ¬åœ°**

   ```bash
   git clone https://github.com/your-username/wxmp.git
   cd wxmp
   ```

3. **åˆ›å»ºåˆ†æ”¯**

   ```bash
   git checkout -b feature/your-feature-name
   ```

4. **è¿›è¡Œä¿®æ”¹**

   - éµå¾ªé¡¹ç›®çš„ä»£ç é£æ ¼
   - æ·»åŠ å¿…è¦çš„æµ‹è¯•
   - æ›´æ–°ç›¸å…³æ–‡æ¡£

5. **æäº¤æ›´æ”¹**

   ```bash
   git add .
   git commit -m "feat: æ·»åŠ æ–°åŠŸèƒ½æè¿°"
   ```

   **æäº¤ä¿¡æ¯æ ¼å¼**ï¼š

   - `feat:` æ–°åŠŸèƒ½
   - `fix:` ä¿®å¤ bug
   - `docs:` æ–‡æ¡£æ›´æ–°
   - `style:` ä»£ç æ ¼å¼è°ƒæ•´
   - `refactor:` ä»£ç é‡æ„
   - `test:` æµ‹è¯•ç›¸å…³
   - `chore:` æ„å»º/å·¥å…·ç›¸å…³

6. **æ¨é€åˆ° Fork**

   ```bash
   git push origin feature/your-feature-name
   ```

7. **åˆ›å»º Pull Request**

   - è®¿é—® https://github.com/morning-start/wxmp
   - ç‚¹å‡» "New Pull Request"
   - å¡«å†™ PR æè¿°ï¼Œè¯´æ˜ä¿®æ”¹å†…å®¹å’ŒåŸå› 

---

## å¼€å‘ç¯å¢ƒè®¾ç½®

### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/morning-start/wxmp.git
cd wxmp
```

### 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ

```bash
# ä½¿ç”¨ uv
uv venv
source .venv/bin/activate  # Linux/Mac
.venv\Scripts\activate     # Windows

# æˆ–ä½¿ç”¨ venv
python -m venv .venv
source .venv/bin/activate  # Linux/Mac
.venv\Scripts\activate     # Windows
```

### 3. å®‰è£…ä¾èµ–

```bash
# å®‰è£…é¡¹ç›®ä¾èµ–
uv sync

# æˆ–ä½¿ç”¨ pip
pip install -e .
```

### 4. å®‰è£…å¼€å‘ä¾èµ–

```bash
# ä½¿ç”¨ uv
uv sync --group dev

# æˆ–ä½¿ç”¨ pip
pip install pytest
```

---

## ä»£ç è§„èŒƒ

### Python ä»£ç é£æ ¼

- éµå¾ª PEP 8 è§„èŒƒ
- ä½¿ç”¨ç±»å‹æ³¨è§£
- ç¼–å†™æ¸…æ™°çš„æ–‡æ¡£å­—ç¬¦ä¸²

**ç¤ºä¾‹**ï¼š

```python
def fetch_fakeid(
    self, query: str, begin: int = 0, count: int = 5
) -> SearchBizResponse:
    """
    æœç´¢å…¬ä¼—å·

    Args:
        query: æœç´¢å…³é”®è¯
        begin: èµ·å§‹ä½ç½®
        count: è¿”å›æ•°é‡

    Returns:
        æœç´¢å“åº”å¯¹è±¡

    Raises:
        SearchBizError: æœç´¢å¤±è´¥æ—¶æŠ›å‡º
    """
    pass
```

### æ–‡æ¡£è§„èŒƒ

- ä½¿ç”¨ä¸­æ–‡ç¼–å†™æ–‡æ¡£
- ä¿æŒæ–‡æ¡£ç®€æ´æ¸…æ™°
- åŒ…å«ä»£ç ç¤ºä¾‹
- ä½¿ç”¨ Mermaid å›¾è¡¨å±•ç¤ºæµç¨‹

---

## æµ‹è¯•

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest

# è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
pytest test/test_time_range_spider.py

# è¿è¡Œç‰¹å®šæµ‹è¯•ç”¨ä¾‹
pytest test/test_time_range_spider.py::TestMatchRemainingTimeRange::test_case1_no_overlap_meta_before_need

# æ˜¾ç¤ºè¯¦ç»†è¾“å‡º
pytest -v

# æ˜¾ç¤ºè¦†ç›–ç‡
pytest --cov=wxmp --cov-report=html
```

### ç¼–å†™æµ‹è¯•

- ä½¿ç”¨ pytest æ¡†æ¶
- æµ‹è¯•æ–‡ä»¶å‘½åï¼š`test_*.py`
- æµ‹è¯•ç±»å‘½åï¼š`Test*`
- æµ‹è¯•æ–¹æ³•å‘½åï¼š`test_*`

**ç¤ºä¾‹**ï¼š

```python
import pytest
from wxmp.spider.time_range_spider import TimeRange, match_remaining_time_range

class TestMatchRemainingTimeRange:
    def test_case1_no_overlap(self):
        meta_time = TimeRange(begin=datetime(2024, 1, 1), end=datetime(2024, 1, 31))
        need_time = TimeRange(begin=datetime(2024, 2, 1), end=datetime(2024, 2, 28))

        remaining_range, new_meta = match_remaining_time_range(meta_time, need_time)

        assert remaining_range.begin == datetime(2024, 2, 1)
        assert remaining_range.end == datetime(2024, 2, 28)
```

---

## æ–‡æ¡£è´¡çŒ®

### æ›´æ–°æ–‡æ¡£

æ–‡æ¡£ä½äº `wiki/` ç›®å½•ï¼š

- `README.md` - æ–‡æ¡£ç´¢å¼•
- `é¡¹ç›®æ¦‚è§ˆ.md` - é¡¹ç›®æ¦‚è§ˆ
- `æ¶æ„è®¾è®¡.md` - æ¶æ„è®¾è®¡
- `APIæ–‡æ¡£.md` - API æ–‡æ¡£
- `ä½¿ç”¨æŒ‡å—.md` - ä½¿ç”¨æŒ‡å—
- `æ•°æ®æµåŠ¨ä¸çŠ¶æ€ç®¡ç†.md` - æ•°æ®æµåŠ¨ä¸çŠ¶æ€ç®¡ç†

### æ–‡æ¡£æ ¼å¼

- ä½¿ç”¨ Markdown æ ¼å¼
- ä½¿ç”¨ä¸­æ–‡ç¼–å†™
- åŒ…å«ä»£ç ç¤ºä¾‹
- ä½¿ç”¨ Mermaid å›¾è¡¨

---

## é¡¹ç›®ç»“æ„

```
wxmp/
â”œâ”€â”€ src/wxmp/                    # æºç ç›®å½•
â”‚   â”œâ”€â”€ api/                     # API å±‚
â”‚   â”œâ”€â”€ spider/                  # Spider å±‚
â”‚   â””â”€â”€ tools/                   # Tools å±‚
â”œâ”€â”€ test/                        # æµ‹è¯•ç›®å½•
â”œâ”€â”€ wiki/                        # æ–‡æ¡£ç›®å½•
â”œâ”€â”€ pyproject.toml              # é¡¹ç›®é…ç½®
â””â”€â”€ README.md                   # é¡¹ç›®è¯´æ˜
```

---

## å‘å¸ƒæµç¨‹

### ç‰ˆæœ¬å·

éµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼ˆSemantic Versioningï¼‰ï¼š

- `MAJOR.MINOR.PATCH`
- `MAJOR`: ä¸å…¼å®¹çš„ API å˜æ›´
- `MINOR`: å‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢
- `PATCH`: å‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£

### å‘å¸ƒæ­¥éª¤

1. æ›´æ–°ç‰ˆæœ¬å·ï¼ˆ`pyproject.toml`ï¼‰
2. æ›´æ–° `CHANGELOG.md`
3. åˆ›å»º Git tag
4. æ¨é€åˆ° GitHub
5. å‘å¸ƒåˆ° PyPI

---

## è¡Œä¸ºå‡†åˆ™

- å°Šé‡æ‰€æœ‰è´¡çŒ®è€…
- æ¥å—å»ºè®¾æ€§æ‰¹è¯„
- å…³æ³¨å¯¹ç¤¾åŒºæœ€æœ‰åˆ©çš„äº‹æƒ…
- å¯¹å…¶ä»–ç¤¾åŒºæˆå‘˜è¡¨ç¤ºåŒç†å¿ƒ

---

## è·å–å¸®åŠ©

å¦‚æœæ‚¨åœ¨è´¡çŒ®è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼š

- æŸ¥çœ‹ [Issues](https://github.com/morning-start/wxmp/issues)
- æé—®æ—¶æä¾›è¯¦ç»†ä¿¡æ¯
- è€å¿ƒç­‰å¾…å›å¤

---

## è®¸å¯è¯

é€šè¿‡è´¡çŒ®ä»£ç ï¼Œæ‚¨åŒæ„æ‚¨çš„è´¡çŒ®å°†æ ¹æ®é¡¹ç›®çš„è®¸å¯è¯è¿›è¡Œæˆæƒã€‚

---

**å†æ¬¡æ„Ÿè°¢æ‚¨çš„è´¡çŒ®ï¼** ğŸ‰
